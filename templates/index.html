<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yield Estimation Data Form</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>

<body>
    <div class="navbar">
        <!-- <img src="/static/global-infoventures.webp" alt="GI Ventures Logo">       -->
        <h1>Yield Estimation</h1>
        <div></div>
    </div>
    <div class="main">
        <form id="dataForm" class="container">
            <div>
                <label for="crop">Crop:</label>
                <select id="crop" name="crop">
                    <!-- Options will be generated by JavaScript -->
                </select>
            </div>

            <div>
                <label for="season">Season:</label>
                <select id="season" name="season">
                    <!-- Options will be generated by JavaScript -->
                </select>
            </div>

            <div>
                <label for="state">State:</label>
                <select id="state" name="state">
                    <!-- Options will be generated by JavaScript -->
                </select>
            </div>
            <div>

                <label for="area">Area(Hectares):</label>
                <input type="text" id="area" name="area" required>

            </div>
            <div>
                <label for="production">Production(Metric tons):</label>
                <input type="text" id="production" name="production" required>

            </div>
            <div>
                <label for="annual_rainfall">Annual Rainfall(Milimeter):</label>
                <input type="text" id="annual_rainfall" name="annual_rainfall" required>

            </div>
            <div>
                <label for="fertilizer">Fertilizer(Kilogram):</label>
                <input type="text" id="fertilizer" name="fertilizer" required>

            </div>
            <div>
                <label for="pesticide">Pesticide(Kilogram):</label>
                <input type="text" id="pesticide" name="pesticide" required>

            </div>
            <button type="submit">Submit</button>
        </form>
        <div id="result">
            <h3>Yield (Metric ton / Hectare)</h3>
            <pre id="response">
                <div>Please Submit the data first</div>
            </pre>
        </div>
    </div>
    <script>
        const crops = {
            0: 'Arecanut',
            1: 'Arhar/Tur',
            8: 'Castor seed',
            9: 'Coconut',
            11: 'Cotton(lint)',
            13: 'Dry chillies',
            16: 'Gram',
            21: 'Jute',
            23: 'Linseed',
            24: 'Maize',
            26: 'Mesta',
            29: 'Niger seed',
            31: 'Onion',
            32: 'Other Rabi pulses',
            37: 'Potato',
            39: 'Rapeseed &Mustard',
            40: 'Rice',
            43: 'Sesamum',
            44: 'Small millets',
            46: 'Sugarcane',
            48: 'Sweet potato',
            49: 'Tapioca',
            50: 'Tobacco',
            51: 'Turmeric',
            53: 'Wheat',
            2: 'Bajra',
            5: 'Black pepper',
            6: 'Cardamom',
            10: 'Coriander',
            14: 'Garlic',
            15: 'Ginger',
            17: 'Groundnut',
            19: 'Horse-gram',
            20: 'Jowar',
            38: 'Ragi',
            7: 'Cashewnut',
            3: 'Banana',
            45: 'Soyabean',
            4: 'Barley',
            22: 'Khesari',
            25: 'Masoor',
            27: 'Moong(Green Gram)',
            34: 'Other Kharif pulses',
            41: 'Safflower',
            42: 'Sannhamp',
            47: 'Sunflower',
            52: 'Urad',
            36: 'Peas & beans (Pulses)',
            54: 'other oilseeds',
            33: 'Other Cereals',
            12: 'Cowpea(Lobia)',
            30: 'Oilseeds total',
            18: 'Guar seed',
            35: 'Other Summer Pulses',
            28: 'Moth'
        };

        const seasons = {
            4: 'Whole Year',
            1: 'Kharif',
            2: 'Rabi',
            0: 'Autumn',
            3: 'Summer',
            5: 'Winter'
        };

        const states = {
            2: 'Assam',
            12: 'Karnataka',
            13: 'Kerala',
            17: 'Meghalaya',
            29: 'West Bengal',
            21: 'Puducherry',
            6: 'Goa',
            0: 'Andhra Pradesh',
            24: 'Tamil Nadu',
            20: 'Odisha',
            3: 'Bihar',
            7: 'Gujarat',
            14: 'Madhya Pradesh',
            15: 'Maharashtra',
            18: 'Mizoram',
            22: 'Punjab',
            27: 'Uttar Pradesh',
            8: 'Haryana',
            9: 'Himachal Pradesh',
            26: 'Tripura',
            19: 'Nagaland',
            4: 'Chhattisgarh',
            28: 'Uttarakhand',
            11: 'Jharkhand',
            5: 'Delhi',
            16: 'Manipur',
            10: 'Jammu and Kashmir',
            25: 'Telangana',
            1: 'Arunachal Pradesh',
            23: 'Sikkim'
        };

        function populateSelect(selectElement, options) {
            for (const [index, value] of Object.entries(options)) {
                const optionElement = document.createElement('option');
                optionElement.value = index;
                optionElement.textContent = value;
                selectElement.appendChild(optionElement);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            populateSelect(document.getElementById('crop'), crops);
            populateSelect(document.getElementById('season'), seasons);
            populateSelect(document.getElementById('state'), states);
        });

        document.getElementById('dataForm').addEventListener('submit', async function (e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const formObject = Object.fromEntries(formData.entries());

            const response = await fetch('/submit_data', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formObject)
            });

            const data = await response.json();
            if (response.ok) {
                document.getElementById('response').textContent = "Estimated Yield: " + JSON.stringify(data);
            } else {
                document.getElementById('response').textContent = "Error: " + data.error;
            }
        });
    </script>
</body>

</html>